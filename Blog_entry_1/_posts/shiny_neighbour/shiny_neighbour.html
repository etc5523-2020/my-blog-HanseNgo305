<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

  <!--radix_placeholder_meta_tags-->
  <title>Unboxing an R package</title>
  
  <meta property="description" itemprop="description" content="Unboxing stuffs has always been a pleasure, and it would be even more so when you spent hours choosing the items inside or actually building the items inside. I am very excited today to unbox an R package created by one of my classmate for his assignment. We will have a look at his package, trying to learn what he had done best and what he could do to improve his work."/>
  
  
  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2020-10-28"/>
  <meta property="article:created" itemprop="dateCreated" content="2020-10-28"/>
  <meta name="article:author" content="Hanh Ngo"/>
  
  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Unboxing an R package"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Unboxing stuffs has always been a pleasure, and it would be even more so when you spent hours choosing the items inside or actually building the items inside. I am very excited today to unbox an R package created by one of my classmate for his assignment. We will have a look at his package, trying to learn what he had done best and what he could do to improve his work."/>
  <meta property="og:locale" content="en_US"/>
  
  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Unboxing an R package"/>
  <meta property="twitter:description" content="Unboxing stuffs has always been a pleasure, and it would be even more so when you spent hours choosing the items inside or actually building the items inside. I am very excited today to unbox an R package created by one of my classmate for his assignment. We will have a look at his package, trying to learn what he had done best and what he could do to improve his work."/>
  
  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Unboxing an R package"]},{"type":"character","attributes":{},"value":["Unboxing stuffs has always been a pleasure, and it would be even more so when you spent hours choosing the items inside or actually building the items inside. I am very excited today to unbox an R package created by one of my classmate for his assignment. We will have a look at his package, trying to learn what he had done best and what he could do to improve his work.  \n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation","program"]}},"value":[{"type":"character","attributes":{},"value":["Hanh Ngo"]},{"type":"character","attributes":{},"value":["Monash University"]},{"type":"character","attributes":{},"value":["Master of Business Analytics"]}]}]},{"type":"character","attributes":{},"value":["10-28-2020"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["click-error.gif","dashboard.png","date-error.png","fix-error.gif","page-setting.png","page.png","shiny_neighbour_files/bowser-1.9.3/bowser.min.js","shiny_neighbour_files/distill-2.2.21/template.v2.js","shiny_neighbour_files/jquery-1.11.3/jquery.min.js","shiny_neighbour_files/webcomponents-2.0.0/webcomponents.js","structure.png","tarzan.gif"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->
  
  <style type="text/css">
  
  body {
    background-color: white;
  }
  
  .pandoc-table {
    width: 100%;
  }
  
  .pandoc-table>caption {
    margin-bottom: 10px;
  }
  
  .pandoc-table th:not([align]) {
    text-align: left;
  }
  
  .pagedtable-footer {
    font-size: 15px;
  }
  
  .html-widget {
    margin-bottom: 2.0em;
  }
  
  .l-screen-inset {
    padding-right: 16px;
  }
  
  .l-screen .caption {
    margin-left: 10px;
  }
  
  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .shaded .shaded-content {
    background: white;
  }
  
  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }
  
  .hidden {
    display: none !important;
  }
  
  d-article {
    padding-bottom: 30px;
  }
  
  d-appendix {
    padding-top: 30px;
  }
  
  d-article>p>img {
    width: 100%;
  }
  
  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }
  
  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  /* CSS for table of contents */
  
  .d-toc {
    color: rgba(0,0,0,0.8);
    font-size: 0.8em;
    line-height: 1em;
  }
  
  .d-toc-header {
    font-size: 0.6rem;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.5);
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 1.3em;
  }
  
  .d-toc a {
    border-bottom: none;
  }
  
  .d-toc ul {
    padding-left: 0;
  }
  
  .d-toc li>ul {
    padding-top: 0.8em;
    padding-left: 16px;
    margin-bottom: 0.6em;
  }
  
  .d-toc ul,
  .d-toc li {
    list-style-type: none;
  }
  
  .d-toc li {
    margin-bottom: 0.9em;
  }
  
  .d-toc-separator {
    margin-top: 20px;
    margin-bottom: 2em;
  }
  
  .d-article-with-toc {
    border-top: none;
    padding-top: 0;
  }
  
  
  
  /* Tweak code blocks (note that this CSS is repeated above in an injection
     into the d-code shadow dom) */
  
  d-code {
    overflow-x: auto !important;
  }
  
  pre.d-code code.d-code {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }
  
  pre.text-output {
  
    font-size: 12px;
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  @media(min-width: 768px) {
  
  d-code {
    overflow-x: visible !important;
  }
  
  pre.d-code code.d-code  {
      padding-left: 18px;
      font-size: 14px;
  }
  pre.text-output {
    font-size: 14px;
  }
  }
  
  /* Figure */
  
  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }
  
  .figure img {
    width: 100%;
  }
  
  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }
  
  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }
  
  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }
  
  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }
  
  
  
  /* Tweak 1000px media break to show more text */
  
  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }
  
    .grid {
      grid-column-gap: 16px;
    }
  
    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }
  
  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }
  
    .grid {
      grid-column-gap: 32px;
    }
  }
  
  
  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */
  
  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }
  
  
  /* Social footer */
  
  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }
  
  .disqus-comments {
    margin-right: 30px;
  }
  
  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }
  
  #disqus_thread {
    margin-top: 30px;
  }
  
  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }
  
  .article-sharing a:hover {
    border-bottom: none;
  }
  
  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .subscribe p {
    margin-bottom: 0.5em;
  }
  
  
  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }
  
  
  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }
  
  .custom p {
    margin-bottom: 0.5em;
  }
  
  
  /* Improve display for browsers without grid (IE/Edge <= 15) */
  
  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }
  
  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }
  
  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }
  
  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }
  
  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }
  
  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }
  
  
  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }
  
  .downlevel .footnotes ol {
    padding-left: 13px;
  }
  
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }
  
  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }
  
  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }
  
  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
  
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
  
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  
  </style>
  
  <script type="application/javascript">
  
  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }
  
  // show body when load is complete
  function on_load_complete() {
  
    // set body to visible
    document.body.style.visibility = 'visible';
  
    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }
  
    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }
  
  function init_distill() {
  
    init_common();
  
    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);
  
    // create d-title
    $('.d-title').changeElementType('d-title');
  
    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);
  
    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();
  
    // move posts container into article
    $('.posts-container').appendTo($('d-article'));
  
    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');
  
    // create d-bibliography
    var bibliography = $('<d-bibliography></d-bibliography>');
    $('#distill-bibliography').wrap(bibliography);
  
    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;
  
    // replace citations with <d-cite>
    $('.citation').each(function(i, val) {
      appendix = true;
      var cites = $(this).attr('data-cites').split(" ");
      var dt_cite = $('<d-cite></d-cite>');
      dt_cite.attr('key', cites.join());
      $(this).replaceWith(dt_cite);
    });
    // remove refs
    $('#refs').remove();
  
    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();
  
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-toc a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });
  
    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');
  
    // replace code blocks with d-code
    $('pre>code').each(function(i, val) {
      var code = $(this);
      var pre = code.parent();
      var clz = "";
      var language = pre.attr('class');
      if (language) {
        // map unknown languages to "clike" (without this they just dissapear)
        if ($.inArray(language, ["bash", "clike", "css", "go", "html",
                                 "javascript", "js", "julia", "lua", "markdown",
                                 "markup", "mathml", "python", "svg", "xml"]) == -1)
          language = "clike";
        language = ' language="' + language + '"';
        var dt_code = $('<d-code block' + language + clz + '></d-code>');
        dt_code.text(code.text());
        pre.replaceWith(dt_code);
      } else {
        code.addClass('text-output').unwrap().changeElementType('pre');
      }
    });
  
    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {
  
      // capture layout
      var layout = $(this).attr('data-layout');
  
      // apply layout to markdown level block elements
      var elements = $(this).children().not('d-code, pre.text-output, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });
  
  
      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });
  
    // load distill framework
    load_distill_framework();
  
    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {
  
      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;
  
      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');
  
      // table of contents
      if (have_authors) // adjust border if we are in authors
        $('.d-toc').parent().addClass('d-article-with-toc');
  
      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');
  
      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }
  
      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');
  
      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");
  
      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }
  
       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }
  
      // inject pre code styles (can't do this with a global stylesheet b/c a shadow root is used)
      $('d-code').each(function(i, val) {
        var style = document.createElement('style');
        style.innerHTML = 'pre code { padding-left: 10px; font-size: 12px; border-left: 2px solid rgba(0,0,0,0.1); } ' +
                          '@media(min-width: 768px) { pre code { padding-left: 18px; font-size: 14px; } }';
        if (this.shadowRoot)
          this.shadowRoot.appendChild(style);
      });
  
      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();
  
      // clear polling timer
      clearInterval(tid);
  
      // show body now that everything is ready
      on_load_complete();
    }
  
    var tid = setInterval(distill_post_process, 50);
    distill_post_process();
  
  }
  
  function init_downlevel() {
  
    init_common();
  
     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));
  
    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
  
    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();
  
    // remove toc
    $('.d-toc-header').remove();
    $('.d-toc').remove();
    $('.d-toc-separator').remove();
  
    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });
  
  
    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);
  
    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);
  
    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();
  
    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();
  
    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));
  
    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });
  
    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));
  
    $('body').addClass('downlevel');
  
    on_load_complete();
  }
  
  
  function init_common() {
  
    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};
  
        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });
  
        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);
  
    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});
  
    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });
  
      }
    });
  
    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });
  
    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }
  
    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');
  
    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");
  
    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();
  
    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });
  
  </script>
  
  <!--/radix_placeholder_distill-->
  <script src="shiny_neighbour_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="shiny_neighbour_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="shiny_neighbour_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="shiny_neighbour_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Unboxing an R package","description":"Unboxing stuffs has always been a pleasure, and it would be even more so when you spent hours choosing the items inside or actually building the items inside. I am very excited today to unbox an R package created by one of my classmate for his assignment. We will have a look at his package, trying to learn what he had done best and what he could do to improve his work.","authors":[{"author":"Hanh Ngo","authorURL":"#","affiliation":"Monash University","affiliationURL":"#"}],"publishedDate":"2020-10-28T00:00:00.000+07:00","citationText":"Ngo, 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Unboxing an R package</h1>
<p>Unboxing stuffs has always been a pleasure, and it would be even more so when you spent hours choosing the items inside or actually building the items inside. I am very excited today to unbox an R package created by one of my classmate for his assignment. We will have a look at his package, trying to learn what he had done best and what he could do to improve his work.<br /></p>
</div>

<div class="d-byline">
  Hanh Ngo  (Monash University)
  
<br/>10-28-2020
</div>

<div class="d-article">
<p>The package I will be reviewing today was created by Dea Avega Editya from my Master class and named <strong>covidasean</strong>. The <strong>covidasean</strong> package is a container for a Shiny dashboard Dea made for his previous assignment reporting the COVID situation for fie countries in the ASEAN region.</p>
<h1 id="an-app-overview">An app overview</h1>
<p>The <strong>covidasean</strong> package could be downloaded and installed via Dea’s github <a href="https://github.com/etc5523-2020/r-package-assessment-dedi0003">here</a>. I was able to install and build the package locally without any problems.</p>
<p>To launch the app contained in the package, Dea set up a function called <code>launch_app()</code> which can be typed into the console to call the app out. A minor problem arose when two of the dependence packages he used for his Shiny app, the <em>tidycovid19</em> and <em>wbstats</em>, were temporarily taken off CRAN. Users who did not have these two packages installed beforehand have to install them remotely from Github. Even though it took extra works, the app launched successfully after the two missing packages were installed.</p>
<p>The package’s structure contained everything we need to build and run a simple package. As we can see from an image below, Dea had created a description, a readme, documentation for the main two of his five R functions (nested under the <em>man</em> folder), vignettes and two unit tests for his package which is enough to get you started with. Moreover, his <a href="https://etc5523-2020.github.io/r-package-assessment-dedi0003/">pkgdown page</a> was promptly set up which really helps navigating through his package. Well done here Dea!</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="structure.png" width="603" /></p>
</div>
<h1 id="potential-area-for-improvement">Potential area for improvement</h1>
<p>Whilst Dea was doing a wonderful job creating his first R package, there certainly are a lot of areas for improvement. I will divide my recommendation into two separate parts: the package and the Shiny app.</p>
<h2 id="the-package">The package</h2>
<p><strong>1. The package structure</strong></p>
<p>If you noticed, Dea had a <strong>covidsean</strong> folder existed inside his R project. I was wondering what that was at first. Turns out it is a sub folder that contains the exact everything that the parent folder has. My best guess was that even though the original class repo was created as a package already, when Dea cloned the repo down to start building his package, he used <code>usethis::create_package(&quot;pkgname&quot;)</code> to yet again create another package nested inside a package. I figured Dea could have faced a lot of troubles for this. I would totally recommend him removing all the unused folders/ files to avoid clustering and confusion for others.</p>
<p><strong>2. The github pages</strong></p>
<p>Whilst I am happy that his pkgdown page has done me a great favour guiding me through the app, I must confess that it took me a while to locate where it resides. Normally if we specified the source for the Github pages in the Setting as below:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="page-setting.png" width="866" /></p>
</div>
<p>On the right hand side of the “Code” page, next to the Readme, you would find something under the Environments. Clicking on the <strong>github-pages</strong> would bring you to the action log where you can get access to the pkgdown site by viewing deployment.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="page.png" width="298" height="50%" /></p>
</div>
<p>I managed to track down Dea’s pkgdown site by visiting the chat he had with our lecturer in the Pull requests tab. I would recommend Dea to set up the Github pages source for easier access to his pkgdown site.</p>
<p><strong>3. The unit tests</strong></p>
<p>Dea had two unit tests for his package. One is for testing the length of the <code>render_case()</code> function which was expected to return 1 for only one plot generated; the other test is for the length of the <code>left_sidebar()</code> function which would expect to return 3 for three inputs he set up in the panel. All tests passed smoothly.</p>
<p>I would say whilst I’m happy that the tests worked for him (I’m sure everyone knew it could be stressful get a pass on a unit test when your deadline draws near), i think these two tests are a little bit simple and somehow obvious to me. Further more, there is not much to expand on these two tests as the object tests are quite simple. I would suggest there are other potential areas to build the unit test on, for example, his table.</p>
<p>Dea set up a table that would return results based on your selected date input. However, there is a latent error embedded in this kind of input, that what would happen if your selected dates are out of the range of the dataset employed? It would return an error like in the picture below:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="date-error.png" width="891" /></p>
</div>
<p>There are two noticeable criteria for this date input to work:</p>
<ul>
<li>Both the begin date and end date have to be smaller than the <code>max(date)</code> of the dataset.<br />
</li>
<li>The end date has to be bigger than the begin date.</li>
</ul>
<p>I at first did not notice but when i started to scan out potential candidate for the unit test, this glitch was brought to attention. It is easy to neglect points like this, especially when you work with a lot of inputs and functions, spanning across a lot of pages in your dashboard.</p>
<h2 id="the-shiny-app">The Shiny app</h2>
<p><strong>1. The code</strong></p>
<p>The highlight of the dashboard was the plotly-click charts where, in this case, you can click on each country presented in the confirmed cases chart (the blue bar chart) and subsequently, the line plot underneath will show the corresponding trend lines (the line chart) for your selected country as shown in the extract below.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="click-error.gif" /><!-- --></p>
</div>
<p>However, as you can see, there was an error produced when you click on the line instead of the bar as instructed in the guidance. In fact, such error would also occur if you click on the lines in the “Trend of People’s Mobility” chart. So what happened here?</p>
<p>First we will have a look at the source code in the below code block:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
# Code to produce bar chart
    output$case &lt;- covidasean:::render_case() 
    
# Code to produce line chart
    output$trendchart &lt;- renderPlotly({
        d &lt;- event_data(&quot;plotly_click&quot;)
            if (is.null(d) return(
                case_plot &lt;- covid_asean_df %&gt;%
                    filter(country == &quot;Indonesia&quot;) %&gt;%
                    ggplot(aes(x = date)) +
                    geom_line(aes(y = ave_new_cases, color =&quot;avg cases&quot;), size = 1) +
                    geom_line(aes(y = ave_new_deaths, color =&quot;avg deaths&quot;), size = 1, alpha = 0.5) +
                    geom_line(aes(y = ave_new_recovered, color =&quot;avg recovered&quot;), size = 1, alpha =0.5) +
                    theme_minimal() +
                    ylab(&quot;Count&quot;)+
                    ggtitle(paste0(&quot;Covid-19 Cases in Indonesia&quot;, d$x))+
                    theme(panel.grid.major.x = element_line(),
                          panel.grid.minor = element_blank(),
                          legend.position=&quot;top&quot;, legend.box = &quot;horizontal&quot;)
            )

        case_plot &lt;- covid_asean_df %&gt;%
            filter(country %in% d$x) %&gt;%
            ggplot(aes(x = date)) +
            geom_line(aes(y = ave_new_cases, color =&quot;avg cases&quot;), size = 1) +
            geom_line(aes(y = ave_new_deaths, color =&quot;avg deaths&quot;), size = 1, alpha = 0.5) +
            geom_line(aes(y = ave_new_recovered, color =&quot;avg recovered&quot;), size = 1, alpha =0.5) +
            theme_minimal() +
            ylab(&quot;Count&quot;)+
            ggtitle(paste0(&quot;Covid-19 Cases in &quot;, d$x))+
            theme(panel.grid.major.x = element_line(),
                  panel.grid.minor = element_blank(),
                  legend.position=&quot;top&quot;, legend.box = &quot;horizontal&quot;)

            return(ggplotly(case_plot)) %&gt;%
                config(displayModeBar = F)  %&gt;%
                layout(legend = list(orientation = &quot;h&quot;, x = 0.2, y = -0.1))
    })</code></pre>
</div>
<p>He had the bar chart created by running a function from an external R script called <code>render_case.R</code> as, i believed, an attempt to refactor the code. We should check that out too:</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
render_case &lt;- function(){
renderPlotly({
  total_case &lt;- covid_asean_df %&gt;%
    group_by(country) %&gt;%
    summarise(confirmed_cases = sum(new_cases))

  total_case %&gt;%
    plot_ly(x = ~country, y = ~confirmed_cases) %&gt;%
    config(displayModeBar = F)
}) }</code></pre>
</div>
<p>There are three problems from these two code blocks:</p>
<ul>
<li>Dea had not specified the <em>“source”</em> plot which the <em>“plotly_click”</em> event referred to. As a result, whenever Shiny detects a <em>“plotly_click”</em> event, it will change the plot, disregarding of the fact that wrong “clicked” plot will lead to the event plot not displaying correctly. In this case, the source plot is the bar plot whilst the event plot is the “COVID-19 Cases in xxx” line plot.<br />
</li>
<li>Fixing this error is not complicated, however the way Dea structured the code made the fix struggling. The source plot in the app was created by calling out a function. However, the <em>“plotly_click”</em> event might not recognise the <em>“source”</em> identified for a plot put within a function from an external source (i.e not in the same R script with an event plot).<br />
</li>
<li>The code to produce the line chart is quite lengthy and is a potential candidate for refactoring. Dea’s idea was that when there is no <em>“plotly_click”</em> event, the default chart will be of Indonesia, not any other countries.</li>
</ul>
<p>Whilst his ideas are great, we can definitely make them better. I had tried to improvise his code, addressing the mentioned problems. The result is shown below:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="fix-error.gif" /><!-- --></p>
</div>
<p>Here is the improvised source code, I have also included comments to places where i made amendment.</p>
<div class="layout-chunk" data-layout="l-body">
<pre class="r"><code>
# Code to build bar chart
output$case &lt;- 
    # Need to bring the plot to the same place with plotly_click event to trigger the source
        renderPlotly({
            total_case &lt;- covid_asean_df %&gt;%
                group_by(country) %&gt;%
                summarise(confirmed_cases = sum(new_cases))
            p &lt;- total_case %&gt;%
              # Indicate the source
                plot_ly(x = ~country, y = ~confirmed_cases, source = &quot;to-click&quot;) %&gt;%
                config(displayModeBar = F)
            p })

    # Create this new variable to response to the plotly_click event
    selectedcountry &lt;- reactiveVal()
    observeEvent(event_data(&quot;plotly_click&quot;, source = &quot;to-click&quot;), {
        selectedcountry(as.character(event_data(&quot;plotly_click&quot;, source = &quot;to-click&quot;)$x))
    })
    
# Code to build line chart
output$trendchart &lt;- renderPlotly({
    # Create display_country to help shorten the code and remove the Indonesia code block
      if (is.null(selectedcountry())) {
      display_country &lt;-  &quot;Indonesia&quot;}
      else {display_country &lt;- selectedcountry()}
  
    # Remove entire Indonesia code block
           # return(
            #    case_plot &lt;- covid_asean_df %&gt;%
            #        filter(country == &quot;Indonesia&quot;) %&gt;%
            #        ggplot(aes(x = date)) +
            #        geom_line(aes(y = ave_new_cases, color =&quot;avg cases&quot;), size = 1) +
            #        geom_line(aes(y = ave_new_deaths, color =&quot;avg deaths&quot;), size = 1, alpha = 0.5) +
                    # geom_line(aes(y = ave_work, color =&quot;Workplaces&quot;), size = 1.2) +
                    # geom_line(aes(y = ave_station, color =&quot;Stations&quot;), size = 1.2)+
            #        geom_line(aes(y = ave_new_recovered, color =&quot;avg recovered&quot;), size = 1, alpha =0.5) +
            #        theme_minimal() +
            #        ylab(&quot;Count&quot;)+
            #        ggtitle(paste0(&quot;Covid-19 Cases in Indonesia&quot;, selectedcountry()))+
                    # facet_wrap(.~ country, nrow = 1)+
            #        theme(panel.grid.major.x = element_line(),
            #              panel.grid.minor = element_blank(),
            #              legend.position=&quot;top&quot;, legend.box = &quot;horizontal&quot;)
            #)

      case_plot &lt;- covid_asean_df %&gt;%
        # Replace the display_country in the filter
            filter(country %in% display_country) %&gt;%
            ggplot(aes(x = date)) +
            geom_line(aes(y = ave_new_cases, color =&quot;avg cases&quot;), size = 1) +
            geom_line(aes(y = ave_new_deaths, color =&quot;avg deaths&quot;), size = 1, alpha = 0.5) +
            geom_line(aes(y = ave_new_recovered, color =&quot;avg recovered&quot;), size = 1, alpha =0.5) +
            theme_minimal() +
            ylab(&quot;Count&quot;)+
        # Replace the display_country also here to create the title
            ggtitle(paste0(&quot;Covid-19 Cases in &quot;, display_country))+
            theme(panel.grid.major.x = element_line(),
                  panel.grid.minor = element_blank(),
                  legend.position=&quot;top&quot;, legend.box = &quot;horizontal&quot;)
            return(ggplotly(case_plot)) %&gt;%
                config(displayModeBar = F)  %&gt;%
                layout(legend = list(orientation = &quot;h&quot;, x = 0.2, y = -0.1))
    })</code></pre>
</div>
<p>I tried to preserve the state of his code as much as could, but i failed to make the code work if the source plot and event plot were not in the same place. Hopefully Dea could pick up from here and continue to develop his work further.</p>
<p><strong>2. The app layout</strong></p>
<p>The layout of the plot is a bit confusing to me. In the side bar we have three inputs to choose from the list. However, the first two belongs to the Mobility plot which located at the bottom of the page - the furthest from the input panel. The last one had nothing to do with either of the plots but the tables located inside the side bar.</p>
<p>I was also a bit confused of the Bibliography button when i could not locate the Bibliography unfolded when i chose “Show”. Turned out the unfolded content was put way in the bottom of the page, which you have to scroll down to see. It was hard to catch if you did not look carefully.</p>
<p>You can have a glimpse through the app interface in the screenshot below:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="dashboard.png" width="752" /></p>
</div>
<p>To make the layout friendlier, I would recommend Dea to:</p>
<ul>
<li>Separate the inputs into different, distinguished parts of the side bar rather than put all of them together in one place. Put the plots/ tables related to the inputs closed to each other.<br />
</li>
<li>The “select country” inputs is somehow related to the plotly_event click plots where “country” served as a trigger for change. I would suggest link the table and these first two plots together by using <code>observeEvent</code> combined with <code>updateSelectizeInput</code>. That way, when ones chose a country from a drop down list, the table and the “Covid-19 Cases” line plot will change at once. Similary, when one chose a country from the bar plot, the table and the “Covid-19 Cases” line plot will also change. In my Shiny app, i was able to perform this combo but it did take quite a handful of trials and errors to finally get it work. I will try to get my hands on Dea’s app to reflect my recommendation when i have more time.<br />
</li>
<li>I would recommend to put the Bibliography (or References) and the introduction of the app into a separate page to avoid clustering.</li>
</ul>
<h1 id="experience-to-bag">Experience to bag</h1>
<p>I must say that whilst building a package is hard, reviewing one is way harder, or probably because this is my first time doing so. However, there is a lot of things i learnt from reviewing my classmate’s work, such as:</p>
<p><strong>1. The magic of tidying</strong></p>
<p>Segmenting the workload is essential and I believe should be done at the very start to avoid overwhelming and confusion. For example, when i checked the Shiny app, i was again lost at the jungle of code, especially when there are refactored code stored in other R scripts placed somewhere else. It was tempting to read everything from start to finish, trying to understand as much as i could along the way, but soon i realized that focusing on one thing at a time boosts the efficiency way better. I segmented Dea’s work into three big parts that called for attention: the bar chart, the COVID-19 line chart and the mobility line chart (The table was straight forward and simple so i left it out). After that, i identified the related elements for each part (the location in the UI, server, the related external function, the imported data if any). Finally i identified the possible links among them all (In this case, the bar chart linked with the COVID-19 line chart by plotly_click event). By doing segmentation in advance, you are better off in the long run when you do diagnosis and improvement as you already know where to look for and if your change in one part can affect another. Even better, by segmenting for others, i begin to think about segmentation for my own code to make other’s life easier should they decided to visit my work someday.</p>
<p><strong>2. His mistakes could be my mistakes</strong></p>
<p>I believe it is easier to recognize other’s mistakes than your own mistakes. By doing diagnosis for Dea’s work, i realized that i also made the same mistakes as he did in some of my previous works (the input date, specifically). It created some kind of memory anchor which will remind me everytime i come across or use this type of input. Turns out that doing review for others actually come back and do me a greater favour than i would expect.</p>
<p><strong>3. A share of knowledge</strong></p>
<p>Finally, I cannot deny that i learnt a lot from other’s works. It could be his ideas of organizing the dashboard, analysing data, writing style or his coding style. For example, in Dea’s app, i really like the way he used icons to brighten up the rather serious content, and his idea of hiding the bibliography using the Show/Hide button (eventhough i did recommend him to separate the bibliography into another page). The mobility report is also a nice touch. I did not think of the COVID numbers could be presented via this channel as my country did not have this way of reporting. It made me remember one line from the song “Son of Man” written by Phil Collins for the Disney movie “Tarzan” in 1999:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="tarzan.gif" /><!-- --></p>
</div>
<p>(Well not “teaching” technically but you get the drill)</p>
<h1 id="appendix">Appendix</h1>
<h2 id="package-review">Package Review</h2>
<p><em>Please check off boxes as applicable, and elaborate in comments below.</em></p>
<h4 id="documentation">Documentation</h4>
<p>The package includes all the following forms of documentation:</p>
<ul>
<li>[x] <strong>Installation instructions:</strong> for the package is found in README<br />
</li>
<li>[x] <strong>Vignette(s)</strong> demonstrating major functionality that runs successfully locally<br />
</li>
<li>[x] <strong>Function Documentation:</strong> for all exported functions in R help<br />
</li>
<li>[x] <strong>Examples</strong> for all exported functions in R Help that run successfully locally</li>
</ul>
<p>All the documentation for this package are presented with necessary examples to guide through.</p>
<h4 id="functionality">Functionality</h4>
<ul>
<li>[x] <strong>Installation:</strong> Installation succeeds as documented.<br />
</li>
<li>[x] <strong>Functionality:</strong> Any functional claims of the software been confirmed.<br />
</li>
<li>[ ] <strong>Automated tests:</strong> Unit tests cover essential functions of the package and a reasonable range of inputs and conditions. All tests pass on the local machine.</li>
</ul>
<p>Installation succeeds when done locally. The two function <code>covid_asean_df</code> and <code>launch_app()</code> worked as expected. The automated tests were too simple and did not cover the essential range of employed inputs. All tests passed locally.</p>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
